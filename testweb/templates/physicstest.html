<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'home.css' %}">
  <title>DashBoard</title>
  <script type='text/JavaScript'>
        function check(){
            option = document.querySelector('input[name=option]:checked').value 
            qno = document.querySelector('input[name=options]:checked').value  
        }

  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

  <script type='text/JavaScript'>
      
    var count = {{count}}
    var counter = 0
    if (count == 1){
      async function counters(){
          counter++

          if((30-counter)%60 > 9)
               document.getElementById('timer1').innerHTML = (30-counter)%60;
          else
              document.getElementById('timer1').innerHTML = '0'+(30-counter)%60;

          if(parseInt((30-counter)/60)%60 > 9)
              document.getElementById('timer2').innerHTML = parseInt((30-counter)/60)%60;
          else
               document.getElementById('timer2').innerHTML = '0'+parseInt((30-counter)/60)%60;

          if(parseInt((30-counter)/3600)>9)
              document.getElementById('timer3').innerHTML = parseInt((30-counter)/3600);
          else
              document.getElementById('timer3').innerHTML = '0'+parseInt((30-counter)/3600);


          if (counter>=30){
            clearInterval(myinterval)
            alert('Test over')
            function myFunction() {
              document.getElementById("formsubmit").submit();
            }
            myFunction()
          }
      }
      const myinterval = setInterval(counters,1000)
    }




    else if(count == 3){
      async function counters(){
        counter++
        console.log(counter)
        if((90-counter)%60>9)
            document.getElementById('timer1').innerHTML = (90-counter)%60;
        else
            document.getElementById('timer1').innerHTML = '0'+(90-counter)%60;
        
        if(parseInt((90-counter)/60)%60>9)
            document.getElementById('timer2').innerHTML = parseInt((90-counter)/60)%60;
        else
            document.getElementById('timer2').innerHTML = '0'+ parseInt((90-counter)/60)%60;

        if(parseInt((90-counter)/3600)>9)
            document.getElementById('timer3').innerHTML = parseInt((90-counter)/3600);
        else
            document.getElementById('timer3').innerHTML = '0' +parseInt((90-counter)/3600);

        if (counter>=90){
          clearInterval(myinterval)
          alert('Test over')
            function myFunction() {
              document.getElementById("formsubmit").submit();
            }
            myFunction()
        }
    }
    const myinterval = setInterval(counters,1000)
    }




    else if(count == 5){
      async function counters(){
        counter++

        if((150-counter)%60>9)
          document.getElementById('timer1').innerHTML = (150-counter)%60;
        else
           document.getElementById('timer1').innerHTML = '0'+(150-counter)%60;

        if(((150-counter)/60)%60>9)
          document.getElementById('timer2').innerHTML = parseInt((150-counter)/60)%60;
        else
          document.getElementById('timer2').innerHTML = '0'+ parseInt((150-counter)/60)%60;

        if(parseInt((150-counter)/3600)>9)
          document.getElementById('timer3').innerHTML = parseInt((150-counter)/3600);
        else
          document.getElementById('timer3').innerHTML = parseInt((150-counter)/3600);
        if (counter>=150){
          clearInterval(myinterval)
          alert('Test over')
            function myFunction() {
              document.getElementById("formsubmit").submit();
            }
          myFunction()
        }
    }
    const myinterval = setInterval(counters,1000)
    }




    else if(count == 10){
      async function counters(){
        counter++
        if((300-counter)%60 > 9)
            document.getElementById('timer1').innerHTML = (300-counter)%60;
        else
            document.getElementById('timer1').innerHTML = '0'+(300-counter)%60;

        if(parseInt((300-counter)/60)%60>9)
          document.getElementById('timer2').innerHTML = parseInt((300-counter)/60)%60;
        else
          document.getElementById('timer2').innerHTML = '0'+ parseInt((300-counter)/60)%60;

        if( parseInt((300-counter)/3600)>9)
          document.getElementById('timer3').innerHTML = parseInt((300-counter)/3600);
        else
          document.getElementById('timer3').innerHTML = parseInt((300-counter)/3600);


        if (counter>=300){
          clearInterval(myinterval)
          alert('Test over')
            function myFunction() {
              document.getElementById("formsubmit").submit();
            }
          myFunction()
        }
    }
    const myinterval = setInterval(counters,1000)
    }

</script>
</head>
<body>
    
    <div class='container'>
      <form action = "{% url 'testweb:calculatep' %}" id ='formsubmit' method="post">
        {% csrf_token %}
        <h1 class="mb-4 " id="quiz-name">Quiz</h1>
        <p>Time left: <span id='timer3'>00</span>:<span id='timer2'>00</span>:<span id='timer1'>00</span></p>
        <div class='ques'>
          {% for tes in test %}
              <div class='question' > 
                    <input type="hidden" name='qno{{tes.qno}}' value='{{tes.qno}}'>{{tes.qname}}
              </div>
              <div class='option'><input type='radio' name='q{{tes.qno}}' value='a'>{{tes.a}}</div>
              <div class='option'><input type='radio' name='q{{tes.qno}}' value='b'>{{tes.b}}</div>
              <div class='option'><input type='radio' name='q{{tes.qno}}' value='c'>{{tes.c}}</div>
              <div class='option'><input type='radio' name='q{{tes.qno}}' value='d'>{{tes.d}}</div>
                    <br>  
          {% endfor %}
          
          <div class="d-flex flex-row mb-3 justify-content-evenly">
              <input type='submit' class="p-2 w-25 btn btn-success" value="Submit">
          </div>
        </div>
            </div>
            </div>
        </form>

       <br>
        </div>
        
</body>